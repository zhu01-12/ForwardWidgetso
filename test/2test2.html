<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ğ™ˆğ™–ğ™ ğ™ ğ™–ğ™‹ğ™–ğ™ ğ™ ğ™–'s ğ™’ğ™ğ™™ğ™œğ™šğ™©ğ™¨</title>
    
    <link rel="icon" href="https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/main/icon.png" type="image/png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Outfit"', '-apple-system', 'sans-serif'],
                    },
                    animation: {
                        'spin-slow': 'spin 8s linear infinite',
                    }
                }
            }
        }
    </script>

    <style>
        /* ğŸŒŒ åŸºç¡€è®¾ç½® */
        body {
            background: radial-gradient(circle at 50% 20%, #1e1e24 0%, #050505 80%);
            color: white;
            /* ä¿æŒçºµå‘æ»šåŠ¨èƒ½åŠ›ï¼Œé˜²é®æŒ¡ */
            min-height: 120vh; 
            overflow-x: hidden;
            overflow-y: auto; 
            display: flex;
            flex-direction: column;
            position: relative;
            
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* =========================================
           ğŸ¬ æµ·æŠ¥å¢™ (Fixed)
        ========================================= */
        #poster-wall-wrapper {
            position: fixed;
            top: -50%; left: -50%; width: 200%; height: 200%;
            z-index: -2; 
            transform: rotate(-12deg);
            overflow: hidden; pointer-events: none;
            opacity: 0; transition: opacity 1.5s ease-out;
        }
        #poster-wall-wrapper.is-loaded { opacity: 0.85; }
        #poster-wall-mover {
            width: 100%; display: flex; flex-direction: column;
            animation: wallScrollUp 110s linear infinite;
        }
        @keyframes wallScrollUp { 0% { transform: translateY(0); } 100% { transform: translateY(-50%); } }
        .poster-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; padding: 8px; width: 100%; align-content: start; 
        }
        @media (min-width: 768px) { .poster-grid { grid-template-columns: repeat(6, 1fr); } }
        .poster-img {
            width: 100%; height: auto; border-radius: 8px; opacity: 0.8; 
            box-shadow: 0 4px 8px -2px rgba(0, 0, 0, 0.6);
            object-fit: cover; aspect-ratio: 2/3; -webkit-user-drag: none; 
        }

        /* =========================================
           ğŸŒ«ï¸ é®ç½©å±‚ (Fixed)
        ========================================= */
        .blur-overlay-top {
            position: fixed; top: 0; left: 0; width: 100%; height: 40vh; z-index: -1; 
            pointer-events: none;
            backdrop-filter: blur(20px) saturate(110%);
            -webkit-backdrop-filter: blur(20px) saturate(110%);
            mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
            -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
            background: rgba(255, 255, 255, 0.02);
        }
        .blur-overlay-bottom {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 50vh; z-index: -1;
            pointer-events: none;
            backdrop-filter: blur(20px) saturate(110%);
            -webkit-backdrop-filter: blur(20px) saturate(110%);
            mask-image: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
            -webkit-mask-image: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 100%);
            background: rgba(255, 255, 255, 0.02);
        }

        /* ğŸƒ æ»‘åŠ¨å®¹å™¨ - å±…ä¸­å¯¹é½ç‰ˆ */
        .snap-x-mandatory { 
            scroll-snap-type: x mandatory; 
            scroll-behavior: smooth; 
            
            /* å…³é”®è®¡ç®—ï¼šç¡®ä¿ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ èƒ½å±…ä¸­ */
            /* æ‰‹æœºç«¯å¡ç‰‡å®½ 64vw -> å·¦å³å†…è¾¹è· (100-64)/2 = 18vw */
            padding: 2rem 18vw; 
        }
        @media (min-width: 640px) {
            /* æ¡Œé¢ç«¯å¡ç‰‡å®½ 280px -> å·¦å³å†…è¾¹è· calc(50% - 140px) */
            .snap-x-mandatory { padding: 2rem calc(50% - 140px); }
        }

        .snap-center { 
            scroll-snap-align: center; 
            scroll-snap-stop: always; 
        }

        .card-gradient-1 { background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); }
        .card-gradient-2 { background: linear-gradient(135deg, #3b82f6 0%, #2dd4bf 100%); }
        .card-gradient-3 { background: linear-gradient(135deg, #f43f5e 0%, #f59e0b 100%); }
        .card-gradient-4 { background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); }
        
        @keyframes spin-one-shot { 0% { transform: rotate(0deg); } 100% { transform: rotate(1080deg); } }
        .spin-active { animation: spin-one-shot 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); }

        /* ğŸ“± åº•éƒ¨ Dock (Fixed) */
        .bottom-dock {
            position: fixed; bottom: 0; left: 0; right: 0; width: 100%;
            padding-top: 16px; padding-bottom: calc(env(safe-area-inset-bottom) + 12px); 
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
            border-top: 1px solid rgba(255,255,255,0.08);
            display: flex; flex-direction: column; align-items: center; z-index: 100;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.3);
        }

        .main-content-spacer { height: 160px; width: 100%; flex-shrink: 0; }

        /* =========================================
           âœ¨ å¡ç‰‡ç‰¹æ•ˆæ ¸å¿ƒ
        ========================================= */
        .widget-card {
            /* é»˜è®¤çŠ¶æ€ï¼ˆæœªé€‰ä¸­ï¼‰ */
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            transform-origin: center center;
            
            /* è¿™é‡Œè°ƒæ•´é€æ˜åº¦ï¼Œ0.5 æ—¢èƒ½çœ‹æ¸…ï¼Œåˆæœ‰å±‚æ¬¡æ„Ÿï¼Œä¸ä¼šåƒä¹‹å‰é‚£æ ·éšèº« */
            opacity: 0.5; 
            transform: scale(0.9);
            filter: blur(2px); /* è½»å¾®æ¨¡ç³Šï¼Œæå‡è´¨æ„Ÿä½†ä¸é®æŒ¡å†…å®¹ */
            
            cursor: pointer; 
            z-index: 1;
        }

        /* é€‰ä¸­çŠ¶æ€ */
        .widget-card.is-active {
            opacity: 1;
            transform: scale(1.05);
            filter: blur(0px);
            z-index: 10;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7); /* å¼ºé˜´å½± */
        }

        .pointer-events-none-img { pointer-events: none; -webkit-user-drag: none; }

        .lang-select {
            appearance: none; background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2); color: white;
            padding: 4px 10px; border-radius: 99px; font-size: 12px;
            backdrop-filter: blur(10px); outline: none; text-align: center; pointer-events: auto; 
        }
        .lang-select option { background: #1e293b; color: white; }
    </style>
</head>
<body class="antialiased" oncontextmenu="return false">

    <div id="poster-wall-wrapper">
        <div id="poster-wall-mover">
            <div id="poster-grid-1" class="poster-grid"></div>
            <div id="poster-grid-2" class="poster-grid"></div>
        </div>
    </div>
    
    <div class="blur-overlay-top"></div>
    <div class="blur-overlay-bottom"></div>

    <div class="absolute top-6 right-6 z-50">
        <select id="lang-switcher" class="lang-select" onchange="changeLanguage(this.value)">
            <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
            <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
            <option value="en">English</option>
        </select>
    </div>

    <header class="pt-16 px-6 text-center shrink-0 z-10 relative">
        <div class="relative w-[80px] h-[80px] mx-auto mb-3 group cursor-pointer" onclick="spinAvatar(this)">
            <div class="absolute -inset-1 bg-[conic-gradient(from_0deg,transparent_0_340deg,white_360deg)] opacity-20 animate-spin-slow rounded-full pointer-events-none"></div>
            <div class="absolute inset-0 bg-gradient-to-tr from-cyan-500 to-blue-600 rounded-full blur-md opacity-60 pointer-events-none"></div>
            <img src="https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/tubiao/makkawidgets.jpg" 
                 class="relative w-full h-full rounded-full border-[3px] border-white/90 object-cover z-10 shadow-2xl pointer-events-none-img" 
                 alt="Avatar" draggable="false">
        </div>
        
        <h1 class="text-2xl font-extrabold tracking-tight mb-1 cursor-pointer select-none active:scale-95 transition-transform" 
            onclick="randomTitleColor()">
            <span id="title-text" class="bg-clip-text text-transparent bg-gradient-to-r transition-all duration-500">
                MakkaPakka's Widgets
            </span>
        </h1>
        <p id="subtitle" class="text-white/50 text-xs font-medium">å·¦å³æ»‘åŠ¨é€‰æ‹©ç»„ä»¶</p>
    </header>

    <main class="flex-grow flex flex-col justify-center relative z-10 min-h-[50vh]">
        <div id="slider-container" 
             class="flex overflow-x-auto hide-scrollbar snap-x-mandatory gap-6 items-center w-full h-full">
             </div>
        
        <div class="text-center text-white/20 text-xs mt-4 animate-bounce">
            <i class="fa-solid fa-angle-down"></i>
        </div>
    </main>

    <div class="main-content-spacer"></div>

    <div class="bottom-dock">
        <div class="w-full max-w-md mx-auto px-6 grid grid-cols-2 gap-3 mb-2">
            <button onclick="togglePreview(true)"
               class="flex items-center justify-center py-3 rounded-xl bg-white/10 border border-white/10 text-white font-bold backdrop-blur-md active:scale-95 transition-transform hover:bg-white/15">
                <i class="fa-solid fa-eye mr-2 text-emerald-400 text-xs"></i>
                <span id="btn-preview" class="text-xs tracking-wide">å¯¼å…¥æˆ‘çš„é¦–é¡µ</span>
            </button>
            
            <a id="import-all-btn" href="#"
               class="flex items-center justify-center py-3 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold shadow-lg shadow-blue-900/30 active:scale-95 transition-transform">
                <i class="fa-solid fa-layer-group mr-2 text-xs"></i>
                <span id="btn-import-all" class="text-xs tracking-wide">å¯¼å…¥å…¨éƒ¨æ¨¡å—</span>
            </a>
        </div>

        <div class="w-full flex items-center justify-center gap-3 opacity-60 scale-90 origin-bottom">
            <div class="text-[10px] text-white/50 font-medium">
                Â© 2026 ğ™ˆğ™–ğ™ ğ™ ğ™–ğ™‹ğ™–ğ™ ğ™ ğ™– â€¢ Forward
            </div>
            <div class="w-px h-2.5 bg-white/20"></div>
            <a href="https://t.me/makkapakka777" target="_blank"
               class="flex items-center text-[10px] text-white/50 hover:text-white transition-colors">
                <i class="fa-brands fa-telegram mr-1"></i>
                <span id="contact-btn-text">è”ç³»ä½œè€…</span>
            </a>
        </div>
    </div>

    <div id="preview-modal" class="fixed inset-0 z-[110] flex items-center justify-center bg-black/80 backdrop-blur-md hidden opacity-0 transition-opacity duration-300">
        <div class="relative w-full h-full flex flex-col items-center justify-center p-6" onclick="if(event.target===this) togglePreview(false)">
            <button onclick="togglePreview(false)" class="absolute top-6 right-6 w-10 h-10 bg-white/10 rounded-full flex items-center justify-center text-white backdrop-blur z-20">
                <i class="fa-solid fa-times"></i>
            </button>
            <div class="max-w-sm w-full bg-white/5 border border-white/10 rounded-3xl overflow-hidden shadow-2xl flex flex-col max-h-[80vh]">
                <div class="p-4 bg-white/5 backdrop-blur border-b border-white/5 flex justify-between items-center">
                    <span id="modal-title" class="text-white font-bold">ä¸‹æ»‘é¢„è§ˆ</span>
                    <span class="text-xs text-rose-400 bg-rose-400/10 px-2 py-1 rounded">Forward â‰¥ 1.3.14</span>
                </div>
                <div class="overflow-y-auto flex-1 bg-black/20">
                    <img src="https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/VIEW3.JPEG" class="w-full h-auto pointer-events-none-img" alt="Preview">
                </div>
                <div class="p-4 bg-white/5 backdrop-blur border-t border-white/5">
                    <a href="https://forward-h5.inch.red/s/makkapakka518" class="block w-full py-3 bg-emerald-500 rounded-xl text-center text-white font-bold shadow-lg shadow-emerald-500/30 active:scale-95 transition-transform">
                        <span id="modal-btn">ç¡®è®¤å¹¶å¯¼å…¥é…ç½®</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const popSoundBase64 = "data:audio/mp3;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDxYJjgn//8C0g+FLeaaGnJH/+ta5zkPH7OQ9H640D13atCSMCJg//fQZzwwEskw0015H///84f/84f/9k=";
        const POSTER_BASE = "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/haibaoqiang/";
        const TOTAL_POSTERS = 30; 

        function initPosterWall() {
            const grid1 = document.getElementById('poster-grid-1');
            const grid2 = document.getElementById('poster-grid-2');
            const wrapper = document.getElementById('poster-wall-wrapper');
            let posters = [];
            for (let i = 1; i <= TOTAL_POSTERS; i++) { posters.push(`${POSTER_BASE}${i}.webp`); }
            posters.sort(() => 0.5 - Math.random());
            let displayList = [...posters];
            while (displayList.length < 48) { displayList = displayList.concat(posters); }
            const gridHtml = displayList.map(url => `<img src="${url}" class="poster-img" loading="lazy" draggable="false" alt="Poster">`).join('');
            grid1.innerHTML = gridHtml; grid2.innerHTML = gridHtml;
            setTimeout(() => { wrapper.classList.add('is-loaded'); }, 300); 
        }

        const i18n = {
            "zh-CN": { subtitle: "å·¦å³æ»‘åŠ¨é€‰æ‹©ç»„ä»¶", contact: "è”ç³»ä½œè€…", preview: "å¯¼å…¥æˆ‘çš„é¦–é¡µ", importAll: "å¯¼å…¥å…¨éƒ¨æ¨¡å—", modalTitle: "ä¸‹æ»‘é¢„è§ˆ", modalBtn: "ç¡®è®¤å¹¶å¯¼å…¥é…ç½®", addBtn: "æ·»åŠ " },
            "zh-TW": { subtitle: "å·¦å³æ»‘å‹•é¸æ“‡çµ„ä»¶", contact: "è¯ç¹«ä½œè€…", preview: "å°å…¥æˆ‘çš„é¦–é ", importAll: "å°å…¥å…¨éƒ¨æ¨¡å¡Š", modalTitle: "ä¸‹æ»‘é è¦½", modalBtn: "ç¢ºèªä¸¦å°å…¥é…ç½®", addBtn: "æ·»åŠ " },
            "en": { subtitle: "Swipe to explore widgets", contact: "Contact Author", preview: "Import Homepage", importAll: "Import All Modules", modalTitle: "Preview", modalBtn: "Confirm & Import", addBtn: "Add" }
        };

        const config = {
            forwardBase: "https://gocy.pages.dev/#forward://widget?url=",
            collectionUrl: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets.fwd",
            widgets: [
                { id: "anime_omni", icon: "fa-ghost", gradient: "card-gradient-1", version: "2.2.4", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/hebingban/animeone.js", lang: { "zh-CN": { title: "äºŒæ¬¡å…ƒå…¨å¢ƒèšåˆ", desc: "å¤šå¹³å°åŠ¨æ¼«æ¦œå•èšåˆ" }, "zh-TW": { title: "äºŒæ¬¡å…ƒå…¨å¢ƒèšåˆ", desc: "å¤šå¹³å°å‹•æ¼«æ¦œå–®èšåˆ" }, "en": { title: "Anime Omni", desc: "Multi-platform Anime Charts" } } },
                { id: "trakt_cal", icon: "fa-calendar-check", gradient: "card-gradient-3", version: "1.0.8", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/hebingban/traktkey.js", lang: { "zh-CN": { title: "Trakt è¿½å‰§æ—¥å†", desc: "å…Key / ä¸ªäººä¸­å¿ƒé›†æˆ" }, "zh-TW": { title: "Trakt è¿½åŠ‡æ—¥æ›†", desc: "å…Key / å€‹äººä¸­å¿ƒé›†æˆ" }, "en": { title: "Trakt Calendar", desc: "No-Key / Personal Hub" } } },
                { id: "variety_hub", icon: "fa-masks-theater", gradient: "card-gradient-2", version: "2.0.3", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/danyi/zongyi.js", lang: { "zh-CN": { title: "å…¨çƒç»¼è‰ºçƒ­åº¦æ¦œ", desc: "ç»¼è‰ºæ›´æ–°è¡¨ä¸çƒ­åº¦" }, "zh-TW": { title: "å…¨çƒç¶œè—ç†±åº¦æ¦œ", desc: "ç¶œè—æ›´æ–°è¡¨èˆ‡ç†±åº¦" }, "en": { title: "Variety Hub", desc: "Global Variety Show Trends" } } },
                { id: "global_tv", icon: "fa-clock", gradient: "card-gradient-4", version: "2.0.9", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/hebingban/zhuijurili-one.js", lang: { "zh-CN": { title: "å…¨çƒè¿½å‰§æ—¶åˆ»è¡¨", desc: "å‰§é›†/ç»¼è‰º/åŠ¨æ¼«å‘¨æ›´" }, "zh-TW": { title: "å…¨çƒè¿½åŠ‡æ™‚åˆ»è¡¨", desc: "åŠ‡é›†/ç¶œè—/å‹•æ¼«å‘¨æ›´" }, "en": { title: "Global TV Schedule", desc: "Weekly TV/Show/Anime" } } },
                { id: "western_hub", icon: "fa-star", gradient: "card-gradient-1", version: "1.0.2", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/hebingban/bangdan-one.js", lang: { "zh-CN": { title: "æ¬§ç¾é£å‘æ ‡", desc: "çƒ‚ç•ªèŒ„å£ç¢‘ & æµåª’ä½“çƒ­åº¦" }, "zh-TW": { title: "æ­ç¾é¢¨å‘æ¨™", desc: "çˆ›ç•ªèŒ„å£ç¢‘ & ä¸²æµç†±åº¦" }, "en": { title: "Western Trends", desc: "Rotten Tomatoes & Streaming" } } },
                { id: "cinephile", icon: "fa-film", gradient: "card-gradient-2", version: "1.0.3", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/hebingban/movielist%26interesting.js", lang: { "zh-CN": { title: "å½±è¿·å®è—", desc: "ç³»åˆ—ç”µå½± & æµæ´¾æ¢ç´¢" }, "zh-TW": { title: "å½±è¿·å¯¶è—", desc: "ç³»åˆ—é›»å½± & æµæ´¾æ¢ç´¢" }, "en": { title: "Cinephile Gems", desc: "Series Collections & Genres" } } },
                { id: "discover", icon: "fa-compass", gradient: "card-gradient-3", version: "1.0.4", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/hebingban/today-one.js", lang: { "zh-CN": { title: "æ¢ç´¢å‘ç°", desc: "ä»Šå¤©çœ‹ä»€ä¹ˆ / é‚£å¹´ä»Šæ—¥" }, "zh-TW": { title: "æ¢ç´¢ç™¼ç¾", desc: "ä»Šå¤©çœ‹ä»€éº¼ / é‚£å¹´ä»Šæ—¥" }, "en": { title: "Discovery", desc: "What to Watch / On This Day" } } },
                { id: "media_hub", icon: "fa-network-wired", gradient: "card-gradient-4", version: "1.2.1", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/cn-int-bangdan.js", lang: { "zh-CN": { title: "å…¨çƒå½±è§†èšåˆ", desc: "Trakt / è±†ç“£ / å¹³å°åˆ†æµ" }, "zh-TW": { title: "å…¨çƒå½±è¦–èšåˆ", desc: "Trakt / è±†ç“£ / å¹³å°åˆ†æµ" }, "en": { title: "Media Aggregator", desc: "Trakt / Douban / Platforms" } } },
                { id: "platform", icon: "fa-tv", gradient: "card-gradient-1", version: "1.0.5", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/zhijiyong-myself/pingtai.js", lang: { "zh-CN": { title: "æµåª’ä½“ç‹¬å®¶", desc: "Netflix/HBO/Bç«™è‡ªåˆ¶" }, "zh-TW": { title: "ä¸²æµç¨å®¶", desc: "Netflix/HBO/Bç«™è‡ªè£½" }, "en": { title: "Originals", desc: "Netflix/HBO/Bilibili etc." } } },
                { id: "danmu", icon: "fa-comments", gradient: "card-gradient-2", version: "1.1.3", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/danmuapi-ProMax.js", lang: { "zh-CN": { title: "å¼¹å¹• Pro", desc: "å¤šæºAPI & ç¹ç®€è½¬æ¢" }, "zh-TW": { title: "å½ˆå¹• Pro", desc: "å¤šæºAPI & ç¹ç°¡è½‰æ›" }, "en": { title: "Danmu Pro", desc: "Multi-Source API & Convert" } } },
                { id: "imdb", icon: "fa-ranking-star", gradient: "card-gradient-3", version: "1.0.3", url: "https://raw.githubusercontent.com/MakkaPakka518/ForwardWidgets/refs/heads/main/widgets/hebingban/imdb%26cn.js", lang: { "zh-CN": { title: "IMDb çƒ­æ¦œ", desc: "å…¨çƒæƒå¨å½±è§†çƒ­æ¦œ" }, "zh-TW": { title: "IMDb ç†±æ¦œ", desc: "å…¨çƒæ¬Šå¨å½±è¦–ç†±æ¦œ" }, "en": { title: "IMDb Charts", desc: "Global Top Trending" } } }
            ]
        };

        let currentLang = 'zh-CN';
        document.getElementById('import-all-btn').href = config.forwardBase + encodeURIComponent(config.collectionUrl);
        const slider = document.getElementById('slider-container');
        const titleColors = ['from-blue-400 to-purple-400','from-green-400 to-cyan-400','from-yellow-400 to-red-400','from-pink-400 to-rose-400','from-indigo-400 to-cyan-400','from-orange-400 to-pink-500'];

        function renderWidgets() {
            slider.innerHTML = ''; 
            config.widgets.forEach((w, i) => {
                const gradientClass = `card-gradient-${(i % 4) + 1}`;
                const link = config.forwardBase + encodeURIComponent(w.url);
                const txt = w.lang[currentLang] || w.lang['zh-CN'];
                
                const card = `
                    <div onclick="scrollToCard(this)" class="snap-center widget-card shrink-0 w-[64vw] sm:w-[280px] h-[300px] relative rounded-[1.8rem] overflow-hidden flex flex-col group active:scale-95">
                        <div class="absolute inset-0 ${gradientClass} opacity-90"></div>
                        <div class="absolute inset-0 bg-black/20 backdrop-blur-[2px]"></div>
                        
                        <div class="relative z-10 h-full p-6 flex flex-col justify-between text-white">
                            <div>
                                <div class="w-12 h-12 rounded-xl bg-white/20 backdrop-blur-md flex items-center justify-center text-xl mb-4 shadow-lg border border-white/20">
                                    <i class="fa-solid ${w.icon}"></i>
                                </div>
                                <h3 class="text-xl font-bold leading-tight mb-2 drop-shadow-md">${txt.title}</h3>
                                <p class="text-white/80 text-xs font-medium leading-relaxed line-clamp-3">${txt.desc}</p>
                            </div>

                            <div>
                                <div class="flex items-center justify-between mb-4">
                                    <span class="text-[10px] font-mono bg-black/20 px-2 py-0.5 rounded-md">v${w.version}</span>
                                </div>
                                <a href="${link}" class="flex items-center justify-center w-full py-3 bg-white text-slate-900 rounded-xl font-bold shadow-xl hover:bg-slate-100 transition-colors text-sm">
                                    <i class="fa-solid fa-plus mr-2 text-[10px]"></i> ${i18n[currentLang].addBtn}
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                slider.innerHTML += card;
            });
            setTimeout(updateSliderEffect, 100);
        }

        // ç‚¹å‡»å¡ç‰‡è‡ªåŠ¨æ»šåŠ¨åˆ°ä¸­é—´
        function scrollToCard(cardElement) {
            cardElement.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = i18n[lang];
            document.getElementById('subtitle').innerText = t.subtitle;
            document.getElementById('contact-btn-text').innerText = t.contact;
            document.getElementById('btn-preview').innerText = t.preview;
            document.getElementById('btn-import-all').innerText = t.importAll;
            document.getElementById('modal-title').innerText = t.modalTitle;
            document.getElementById('modal-btn').innerText = t.modalBtn;
            renderWidgets();
        }

        // æ ¸å¿ƒç‰¹æ•ˆé€»è¾‘ï¼šè®¡ç®—è·ç¦»ï¼Œå†³å®šæ˜¯å¦é«˜äº®
        function updateSliderEffect() {
            const container = slider;
            const center = container.scrollLeft + container.offsetWidth / 2;
            const cards = document.querySelectorAll('.widget-card');
            
            cards.forEach(card => {
                const cardCenter = card.offsetLeft + card.offsetWidth / 2;
                const distance = Math.abs(center - cardCenter);
                
                // è·ç¦»å°äº 35% å®½åº¦æ—¶åˆ¤å®šä¸ºâ€œæ¿€æ´»â€
                if (distance < container.offsetWidth * 0.35) {
                    card.classList.add('is-active');
                } else {
                    card.classList.remove('is-active');
                }
            });
        }
        
        // ç›‘å¬æ»šåŠ¨äº‹ä»¶æ›´æ–°ç‰¹æ•ˆ
        slider.addEventListener('scroll', updateSliderEffect);

        function spinAvatar(el) {
            const audio = new Audio(popSoundBase64);
            audio.volume = 0.5; audio.play().catch(e => console.log(e));
            const img = el.querySelector('img');
            img.classList.remove('spin-active'); void img.offsetWidth; img.classList.add('spin-active');
            if(navigator.vibrate) navigator.vibrate(50);
        }

        function randomTitleColor() {
            const text = document.getElementById('title-text');
            const newColor = titleColors[Math.floor(Math.random() * titleColors.length)];
            text.className = `bg-clip-text text-transparent bg-gradient-to-r ${newColor} transition-all duration-500`;
        }

        function togglePreview(show) {
            const modal = document.getElementById('preview-modal');
            if (show) { modal.classList.remove('hidden'); setTimeout(() => modal.classList.remove('opacity-0'), 10); }
            else { modal.classList.add('opacity-0'); setTimeout(() => modal.classList.add('hidden'), 300); }
        }

        renderWidgets(); 
        initPosterWall(); 
        randomTitleColor();
    </script>
</body>
</html>
